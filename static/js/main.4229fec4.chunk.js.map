{"version":3,"sources":["revamp.js","lib/queryString.js","actions.js","reducer.js","components/Loading.js","reactLoadable.js","reduxLogic.js","Router/Routes.js","index.js"],"names":["shouldRenewToken","state","expiresAt","session","timeNowInSeconds","Date","console","info","decideErrorRedirect","err","history","JSON","stringify","request","toString","push","log","fetchName","token","nameConfig","url","params","access_token","axios","then","res","catch","fetchMeetup","additionalParams","meetupConfig","page","status","headers","Accept","data","fetchSpecificGroupMeetup","groupName","replace","Object","_Users_michaeldimmitt_new_c_todaysWork_ruby_meetup_subscribe_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","group_urlname","results","fetchGroups","groupConfig","only","rsvp","id","attendValue","config","method","event_id","concat","require","compose","join","map","toPairs","split","tail","fromPairs","toQs","parseQs","module","exports","REQUEST_MEETUPS","RECEIVE_MEETUPS","TO_MEETUP_DETAILS","TO_LOGIN","SAVE_SESSION","LOAD_DATA","fetchMeetups","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","getState","name","meetups","groups","wrap","_context","prev","next","type","sent","abrupt","t0","stop","this","_x","_x2","apply","arguments","initState","accessToken","meetup","isFetching","reducer","length","undefined","action","assign","sessionStorage","getItem","oauthResponse","expires_in","setItem","clear","find","propEq","Loading","props","isLoading","timedOut","react_default","createElement","pastDelay","error","Error","Loadable","loader","__webpack_require__","e","bind","loading","Login","Meetups","Promise","all","MeetupDetails","RsvpComponent","checkOauth","passedProps","location","pathname","sessionExpiresAt","sessionAccessToken","window","hash","resp","Routes","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","show","assertThisInitialized","event","toMeetupDetails","_this2","_this$props","Switch","Route","path","exact","component","render","onSelect","onBack","home","Redirect","to","Component","connect","route","store","createStore","applyMiddleware","thunkMiddleware","ReactDom","react_redux_es","BrowserRouter","document","querySelector"],"mappings":"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","file":"static/js/main.4229fec4.chunk.js","sourcesContent":["\r\nimport axios from 'axios'\r\n// const { concat, pipe, join, map, toPairs, split, fromPairs } = require('ramda')\r\n\r\n// // begin fetchToken\r\n\r\n// const createQueryStringFromObject = pipe(toPairs(),map(join('=')), join('&'), concat('?'))\r\n\r\n// const fetchTokenUrl = (MEETUP_CLIENT_ID,MEETUP_REDIRECT_URI) => {\r\n//   const oauthTwoRequest = `https://secure.meetup.com/oauth2/authorize?client_id=${MEETUP_CLIENT_ID}&response_type=token&redirect_uri=${MEETUP_REDIRECT_URI}`;\r\n//   return oauthTwoRequest;\r\n// }\r\n\r\n// const fetchValuesFromResulHash = pipe(split('&'), map(split('=')),fromPairs())\r\n\r\n// const shouldRenewToken = (state, timeNowInSeconds) => {\r\nexport const shouldRenewToken = (state) => {\r\n  const expiresAt = state.session.expiresAt;\r\n  const timeNowInSeconds = new Date() / 1000 // in seconds\r\n\r\n  console.info('token will expire in', (expiresAt - timeNowInSeconds) / 60, 'minutes')\r\n  return timeNowInSeconds > expiresAt ? true : false\r\n}\r\n\r\nexport function currentTimeLeft(expires_in){\r\n  return ((new Date() / 1000) + expires_in)\r\n}\r\n\r\n// // end fetchToken\r\nexport const decideErrorRedirect = ( err, history) => {\r\n  const corsCheck = JSON.stringify( err.request.toString() ) === '\"[object XMLHttpRequest]\"'; \r\n  if(corsCheck){\r\n    history.push('error'); console.log('error, probably 429');\r\n  } else{\r\n    console.log('error, probably NOT 429'); }; \r\n  return 'error, probably 429'  \r\n}\r\n\r\nexport const fetchName = (token, history) => {\r\n  const nameConfig = {\r\n    url: 'https://api.meetup.com/members/self',\r\n    params: {\r\n    access_token: token\r\n    }\r\n  }\r\n  return axios(nameConfig)\r\n  .then(res => { return res})\r\n  .catch(err => { decideErrorRedirect(err, history)} )\r\n}\r\n\r\n\r\nexport const fetchMeetup = (token, additionalParams, history) => {\r\n  const meetupConfig = {\r\n      url: 'https://api.meetup.com/self/events',\r\n      params: {\r\n        page: 1,\r\n        status: 'upcoming',\r\n        access_token: token\r\n      },\r\n      headers: {\r\n        \"Accept\": \"*/*\"\r\n      }\r\n  }\r\n  return axios(meetupConfig) \r\n  .then(res => { console.log({data: res.data}); return res.data})\r\n  .catch(err => {decideErrorRedirect(err, history)} )\r\n}\r\n\r\nexport const fetchSpecificGroupMeetup = (token, additionalParams, groupName,history) => {\r\n  groupName = groupName.replace(/(#+)|([!].+)/g, '')\r\n  groupName = groupName.replace(/[^0-9a-zA-Z]+/g, '-')\r\n  const meetupConfig = {\r\n      url: 'https://api.meetup.com/2/events',\r\n      params: {\r\n        access_token: token,\r\n        page: 20,\r\n        status: 'upcoming'\r\n      },\r\n      headers: {\r\n        \"Accept\": \"*/*\"\r\n      }\r\n  }\r\n  additionalParams={...additionalParams, group_urlname: groupName}\r\n  meetupConfig.params = {...additionalParams, ...meetupConfig.params}\r\n  \r\n  return axios(meetupConfig)\r\n  .then(res => { console.log(res.data.results); return res.data.results; })\r\n  .catch(err => { decideErrorRedirect(err, history)} )\r\n}\r\n\r\nexport const fetchGroups = (token, additionalParams, history) => {\r\n  const groupConfig = {\r\n      url: 'https://api.meetup.com/self/groups',\r\n      params: {\r\n        page: 20,\r\n        access_token: token,\r\n        only:'name'\r\n      },\r\n      headers: {\r\n        \"Accept\": \"*/*\"\r\n      }\r\n  }\r\n  return axios(groupConfig) \r\n  .then(res => { return res.data})\r\n  .catch(err => { decideErrorRedirect(err, history)} )\r\n}\r\n\r\n// https://www.meetup.com/meetup_api/docs/batch/\r\nexport const rsvp = (token, id, attendValue,history) => {\r\n  const config = {\r\n    method: 'POST',\r\n    url: 'https://api.meetup.com/2/rsvp',\r\n    params: {\r\n      rsvp: attendValue, //'yes/ no' \r\n      event_id: `${id}`,\r\n      access_token: token,\r\n    }, \r\n    headers: {\r\n      \"Accept\": \"*/*\"\r\n    }\r\n  };\r\n  return axios(config)\r\n  .then(res => { return res})\r\n  .catch(err => { decideErrorRedirect(err, history)} )\r\n}\r\n\r\n    // case LOAD_DATA:\r\n    // console.log('loading data from session storage')\r\n    //   session: {\r\n    //     expiresAt: +sessionStorage.getItem('sessionExpiresAt'),\r\n    //     accessToken: sessionStorage.getItem('sessionAccessToken')\r\n    //   }\r\n\r\n\r\n    // case SAVE_SESSION:\r\n    // const expiresAt = (new Date() / 1000) + +action.oauthResponse.expires_in\r\n    // sessionStorage.setItem('sessionExpiresAt', expiresAt)\r\n    // sessionStorage.setItem('sessionAccessToken', action.oauthResponse.access_token)\r\n    // session: {\r\n    //   accessToken: action.oauthResponse.access_token,\r\n    //   expiresAt: expiresAt\r\n    // }\r\n    \r\n// not needed, it is not that hard to change params on a querystring.\r\n// createQueryStringFromObject = pipe(\r\n//   toPairs(),\r\n//   map(join('=')), \r\n//   join('&'), \r\n//   concat('?')\r\n// )\r\n\r\n// const fetchTokenUrlFromObject = () => {\r\n//   const params = {\r\n//     client_id: MEETUP_CLIENT_ID,\r\n//     response_type: 'token',\r\n//     redirect_uri: MEETUP_REDIRECT_URI\r\n//   }\r\n//   const oauthTwoRequest = 'https://secure.meetup.com/oauth2/authorize' + createQueryStringFromObject(params)\r\n// }","const { compose, concat, join, map, toPairs, split, tail, fromPairs } = require('ramda')\r\n\r\n// qs :: object -> string\r\nconst toQs = compose(\r\n  concat('?'), \r\n  join('&'), \r\n  map(join('=')), \r\n  toPairs)\r\n\r\nconst parseQs = compose(fromPairs, map(split('=')), split('&'), tail)\r\n\r\nmodule.exports = {\r\n  toQs,\r\n  parseQs\r\n}","import { fetchName, fetchMeetup, fetchGroups, shouldRenewToken } from './revamp'\r\n// import { parseQs } from './lib/queryString'\r\n\r\nexport const REQUEST_MEETUPS = 'REQUEST_MEETUPS'\r\nexport const RECEIVE_MEETUPS = 'RECEIVE_MEETUPS'\r\nexport const TO_MEETUP_DETAILS = 'TO_MEETUP_DETAILS'\r\nexport const TO_LOGIN = 'TO_LOGIN'\r\nexport const SAVE_SESSION = 'SAVE_SESSION'\r\nexport const LOAD_DATA = 'LOAD_DATA'\r\n\r\nexport function loadData() {\r\n  return { type: LOAD_DATA }\r\n}\r\n\r\nexport function saveSession(resp) {\r\n  console.info('save session', resp)\r\n  return {\r\n    type: SAVE_SESSION,\r\n    oauthResponse: resp\r\n  }\r\n}\r\n\r\nexport function toMeetupDetails(id) {\r\n  return {\r\n    type: TO_MEETUP_DETAILS,\r\n    id: id\r\n  }\r\n}\r\n\r\nexport function requestMeetups() {\r\n  return { type: REQUEST_MEETUPS }\r\n}\r\n\r\nexport function toLogin() {\r\n  return { type: TO_LOGIN }\r\n}\r\n\r\nexport function receivedMeetups(json) {\r\n  return {\r\n    type: RECEIVE_MEETUPS,\r\n    meetups: json\r\n  }\r\n}\r\n\r\n// https://www.youtube.com/watch?v=3u7kDfEtKfs\r\nexport function fetchMeetups(token, history) {\r\n\r\n  return async (dispatch, getState) => {\r\n    if (shouldRenewToken(getState())) {\r\n      console.info('need to renew token')\r\n      dispatch(toLogin())\r\n      history.push('login')\r\n    } else {\r\n      console.info('token still good')\r\n      dispatch(requestMeetups())\r\n      history.push('rsvp')\r\n        try{\r\n          let name = (await fetchName(token, history)).data.name\r\n          let meetups = (await fetchMeetup(token, {}, history))\r\n          let groups = await fetchGroups(token, history)\r\n          meetups.groups = groups\r\n          meetups.name = name\r\n          \r\n          return dispatch(receivedMeetups(meetups))\r\n        }\r\n        catch(e){\r\n          console.log(e)\r\n          history.push('error') // temporary hack to reset app when request fail due to meetup only allowing cors with valid token\r\n        }\r\n    }\r\n  }\r\n}\r\n","import { find, propEq /* filter */ } from 'ramda'\r\nimport { REQUEST_MEETUPS, RECEIVE_MEETUPS, TO_MEETUP_DETAILS,\r\n  TO_LOGIN, SAVE_SESSION, LOAD_DATA } from './actions'\r\n\r\nconst initState = {\r\n  session: {\r\n    accessToken: '',\r\n    expiresAt: ''\r\n  },\r\n  meetup: {},\r\n  meetups: [],\r\n  groups: [],\r\n  isFetching: false\r\n}\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n  case LOAD_DATA:\r\n    console.log('loading data from session storage')\r\n    return Object.assign({}, state, {\r\n      session: {\r\n        expiresAt: +sessionStorage.getItem('sessionExpiresAt'),\r\n        accessToken: sessionStorage.getItem('sessionAccessToken')\r\n      }\r\n    })\r\n  case SAVE_SESSION:\r\n    const expiresAt = (new Date() / 1000) + +action.oauthResponse.expires_in\r\n    sessionStorage.setItem('sessionExpiresAt', expiresAt)\r\n    sessionStorage.setItem('sessionAccessToken', action.oauthResponse.access_token)\r\n    return Object.assign({}, state, {\r\n      session: {\r\n        accessToken: action.oauthResponse.access_token,\r\n        expiresAt: expiresAt\r\n      }\r\n    })\r\n  case TO_LOGIN:\r\n    console.info('clear session in session storage and state')\r\n    sessionStorage.clear()\r\n    return Object.assign({}, state, {\r\n      // reset token\r\n      session: {\r\n        accessToken: '',\r\n        expiresAt: ''\r\n      }\r\n    })\r\n  case TO_MEETUP_DETAILS:\r\n    return Object.assign({}, state, {\r\n      meetup: find(propEq('id', action.id), state.meetups)\r\n    })\r\n  case REQUEST_MEETUPS:\r\n    return Object.assign({}, state, { isFetching: true })\r\n  case RECEIVE_MEETUPS:\r\n    return Object.assign({}, state, {\r\n      isFetching: false ,\r\n      meetups: action.meetups\r\n    })\r\n  default:\r\n    return state\r\n  }\r\n}\r\n\r\nexport default reducer\r\n","import React from 'react';\r\n\r\nexport default function Loading(props) {\r\n  if (props.isLoading) {\r\n    if (props.timedOut) {\r\n      return <div>Loader timed out!</div>;\r\n    } else if (props.pastDelay) {\r\n      return <div>Loading...</div>;\r\n    } else {\r\n      return null;\r\n    }\r\n  } else if (props.error) {\r\n    return <div>Error! Component failed to load</div>;\r\n  } else {\r\n    return null;\r\n  }\r\n}","import Loadable from 'react-loadable';\r\nimport Loading from './components/Loading';\r\n\r\nexport const Error = Loadable({\r\n    loader: () => import('./components/Error'),\r\n    loading: Loading,\r\n});\r\nexport const Login = Loadable({\r\n    loader: () => import('./components/Login'),\r\n    loading: Loading,\r\n});\r\nexport const Meetups = Loadable({\r\n    loader: () => import('./components/Meetups'),\r\n    loading: Loading,\r\n});\r\nexport const MeetupDetails = Loadable({\r\n    loader: () => import('./components/MeetupDetails'),\r\n    loading: Loading,\r\n});\r\nexport const RsvpComponent = Loadable({\r\n    loader: () => import('./components/RsvpComponent'),\r\n    loading: Loading,\r\n});\r\n","import { loadData, saveSession, fetchMeetups } from './actions'\r\nimport { parseQs } from './lib/queryString'\r\n\r\nexport let checkOauth  = (passedProps) => {\r\n    if(passedProps.history.location.pathname === \"/error\"){\r\n        console.log('no request was made because error component was previous.')\r\n    } else {\r\n        const sessionExpiresAt = sessionStorage.getItem('sessionExpiresAt')\r\n        const sessionAccessToken = sessionStorage.getItem('sessionAccessToken')\r\n\r\n        if (sessionAccessToken && sessionExpiresAt) {\r\n            console.info('returning visitor - load data')\r\n\r\n            passedProps.dispatch(loadData())\r\n            passedProps.dispatch(fetchMeetups(sessionAccessToken, passedProps.history))\r\n\r\n        } else {\r\n            console.info('first time visitor', passedProps.history)\r\n\r\n            if (window.location.hash.length > 0) {\r\n            console.info('redirect back from meetup &b have fragment')\r\n            const oauthResponse = parseQs(window.location.hash)\r\n\r\n            // save data\r\n            console.info('save to session storage and state')\r\n            passedProps.dispatch(saveSession(oauthResponse))\r\n            passedProps.dispatch(fetchMeetups(oauthResponse.access_token, passedProps.history))\r\n            }\r\n        }\r\n    }\r\n}\r\n","import React, {Component} from 'react'\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { Error, Login, Meetups, MeetupDetails, RsvpComponent } from '../reactLoadable';\r\nimport { connect } from 'react-redux'\r\nimport { checkOauth } from '../reduxLogic';\r\nimport { toMeetupDetails } from '../actions';\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  console.info(state)\r\n  return {\r\n    meetups: state.meetups,\r\n    meetup: state.meetup,\r\n    groups: state.groups,\r\n    route: state.route,\r\n    session: state.session,\r\n    isFetching: state.isFetching\r\n  }\r\n}\r\n\r\nclass Routes extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.checkOauth = checkOauth\r\n    this.show = this.show.bind(this)\r\n  }\r\n\r\n  show(event, id) {\r\n    this.props.dispatch(toMeetupDetails(id))\r\n    this.props.history.push('meetupdetails')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkOauth(this.props)\r\n  }\r\n\r\n  render() {\r\n    const { meetups, meetup, groups, isFetching, session, history} = this.props\r\n    return (\r\n        <Switch>\r\n          <Route path=\"/\" exact component={ Login } />\r\n          <Route path=\"/error\" exact render={(props) => <Error history={history} />} />\r\n          <Route path=\"/login\" exact component={ Login } />\r\n          <Route path=\"/meetups\" exact render={(props) => <Meetups meetups={meetups} onSelect={this.show} isFetching={isFetching} />} />\r\n          <Route path=\"/meetupdetails\" exact render={(props) => <MeetupDetails meetup={meetup} onBack={this.home} />} />\r\n          <Route path=\"/rsvp\" exact render={(props) => <RsvpComponent groups={groups} meetups={meetups} history={history} session={session} rsvp={this.rsvp} />} />\r\n          <Route render={() => <Redirect to=\"/\" />} />\r\n        </Switch>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Routes)\r\n","import React from 'react'\r\nimport ReactDom from 'react-dom'\r\n\r\nimport { createStore, applyMiddleware } from 'redux'\r\nimport reducer from './reducer'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { createLogger } from 'redux-logger'\r\n\r\n// import NestedRoutes from './Router/NestedRoutes'\r\nimport { Provider } from 'react-redux'\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\nimport Routes from './Router/Routes'\r\n\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  process.env.NODE_ENV === 'development' ?\r\n  applyMiddleware(thunkMiddleware, createLogger()) :\r\n  applyMiddleware(thunkMiddleware)\r\n)\r\n\r\nReactDom.render(\r\n  <Provider store={store}>\r\n    <Router>\r\n      <Route path=\"/\" component={ Routes } />\r\n    </Router>\r\n  </Provider>,\r\n  document.querySelector('#root')\r\n)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}